{
  "openapi": "3.0.0",
  "info": {
    "title": "Amin Ahmadi, Melodex APIs",
    "description": "this project a social media project with feature(post, comment, story, subscription payment, Post display decision algorithm, like, bookmark, search, ...)",
    "version": "1.0.0"
  },

  "paths": {
    "/api/v1/auth/send": {
      "post": {
        "tags": ["Auth üîê"],
        "summary": "Send OTP to validate phone number",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "phone": {
                    "type": "string",
                    "example": "0914...6020"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Send otp code to phone number successfully"
          },
          "403": {
            "description": "phone number is banned"
          },
          "422": {
            "description": "phone number is not valid"
          },
          "409": {
            "description": "otp code already to phone number send"
          }
        }
      }
    },
    "/api/v1/auth/verify": {
      "post": {
        "tags": ["Auth üîê"],
        "summary": "Verify otp code",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "phone": {
                    "type": "string",
                    "example": "0914...6020"
                  },
                  "code": {
                    "type": "number",
                    "example": "556558"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "You have successfully logged in."
          },
          "201": {
            "description": "You have successfully registered."
          },
          "404": {
            "description": "otp code to phone number not found."
          }
        }
      }
    },
    "/api/v1/auth/refresh": {
      "post": {
        "tags": ["Auth üîê"],
        "summary": "Create new refresh token",
        "responses": {
          "401": {"description": "User not authorized"},
          "403": {"description": "User already banned"},
          "409": {"description": "Refresh token is not acceptable"},
          "200": { "description": "new token generated successfully" }
        }
      }
    },
    "/api/v1/users/": {
      "patch": {
        "tags": ["Users"],
        "summary": "Update user information",
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "bio": {
                    "type": "string",
                    "example": "Within me, there are a thousand selves; and if one self breaks, another self is born!' \uD83E\uDDDA\uD83C\uDF31‚Ä¢"
                  },
                  "fullName": {
                    "type": "string",
                    "example": "Amin Ahmadi"
                  },
                  "username": {
                    "type": "string",
                    "example": "Amin_Ahmadi_123456"
                  },
                  "profile": {
                    "type": "string",
                    "format": "binary"
                  },
                  "password": {
                    "type": "string",
                    "example": "@Amadi1565"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "409": {"description": "username already exists."},
          "400": {"description": "profile format is not valid"},
          "422": {"description": "validation error"},
          "200": {"description": "update user information successfully"},
          "401": { "description": "user not authorized" }
        }
      }
    },
    "/api/v1/users/settings": {
      "patch": {
        "tags": ["Users"],
        "summary": "Update user settings",
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "Private": {
                    "type": "string",
                    "enum": ["PUBLIC", "PRIVATE"],
                    "default": "PUBLIC"
                  },
                  "ShowProfile": {
                    "type": "string",
                    "enum": ["ALL", "FOLLOWERS"],
                    "default": "ALL"
                  },
                  "ShowStories": {
                    "type": "string",
                    "enum": ["ALL", "FOLLOWERS", "PRIVATE"],
                    "default": "ALL"
                  },
                  "Comments": {
                    "type": "string",
                    "enum": ["ALL", "FOLLOWERS", "PRIVATE"],
                    "default": "ALL"
                  },
                  "Messages": {
                    "type": "string",
                    "enum": ["ALL", "FOLLOWERS", "PRIVATE"],
                    "default": "ALL"
                  },
                  "Uploads": {
                    "type": "string",
                    "enum": ["ALL", "FOLLOWERS", "PRIVATE"],
                    "default": "PRIVATE"
                  },
                  "Playlists": {
                    "type": "string",
                    "enum": ["ALL", "FOLLOWERS", "PRIVATE"],
                    "default": "FOLLOWERS"
                  },
                  "Analytics": {
                    "type": "string",
                    "enum": ["ALL", "FOLLOWERS", "PRIVATE"],
                    "default": "PRIVATE"
                  },
                  "showMonetization": {
                    "type": "string",
                    "enum": ["ALL", "FOLLOWERS", "PRIVATE"],
                    "default": "PRIVATE"
                  },
                  "Monetization": {
                    "type": "string",
                    "enum": ["ALL", "FOLLOWERS", "PRIVATE"],
                    "default": "PRIVATE"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "404": {"description": "User not found."},
          "422": {"description": "validation error"},
          "200": {"description": "update user setting successfully"},
          "401": { "description": "user not authorized" }
        }
      },
      "get": {
        "tags": ["Users"],
        "summary": "get user settings",
        "responses": {
          "200": { "description": "get user setting successfully" },
          "401": { "description": "user not authorized" }
        }
      }
    },
    "/api/v1/users/Me": {
      "get": {
        "tags": ["Users"],
        "summary": "i information",
        "responses": {
          "401": {"description": "User not authorized"},
          "200": {"description": "get user all information successfully"}
        }
      }
    },
    "/api/v1/users/logout": {
      "post": {
        "tags": ["Users"],
        "summary": "logout from site",
        "responses": {
          "200": {"description": "user logout successfully"},
          "401": { "description": "user not authorized" }
        }
      }
    },
    "/api/v1/users/remove-profile": {
      "delete": {
        "tags": ["Users"],
        "summary": "remove profile",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "route": {
                    "type": "string",
                    "example": "/uploads/profiles/1762916332674-20250926_120011.jpg"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "401": {
            "description": "user not authorized"
          }
        }
      }
    },
    "/api/v1/users/{id}": {
      "get": {
        "tags": ["Users"],
        "summary": "show user page",
        "responses": {
          "401": {
            "description": "user not authorized"
          }
        }
      }
    }
  }
}
